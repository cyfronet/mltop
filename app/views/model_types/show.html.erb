<% content_for :head do %>
  <%= turbo_refreshes_with method: :morph, scroll: :preserve %>
<% end %>

<table class="table-auto border-collapse w-full border border-zinc-400 dark:border-zinc-500 bg-white dark:bg-zinc-800 text-sm shadow-sm">
  <thead class="sticky top-0 bg-zinc-50 dark:bg-zinc-700">
    <tr>
      <th colspan="1" rowspan="2" class="border border-zinc-300 dark:border-zinc-600 font-semibold p-4 text-zinc-900 dark:text-zinc-200 text-left">
        Models
      </th>
      <% @model_type.benchmarks.each do |benchmark| %>
        <th colspan="<%= benchmark.metrics.size %>" class="border border-zinc-300 dark:border-zinc-600 font-semibold p-4 text-zinc-900 dark:text-zinc-200 text-center font-black">
          <%= benchmark.name %>
        </th>
        <% end %>
    </tr>
    <tr>
      <% @model_type.metrics.each do |metric| %>
        <th class="border border-zinc-300 dark:border-zinc-600 font-semibold p-4 text-zinc-900 dark:text-zinc-200 text-center">
          <%= link_to model_type_path(@model_type, mid: metric.id, o: metric_order(metric)), class: "flex items-center justify-center" do %>
            <span class="mr-3"><%= metric.name %></span>
            <%= sort_chevron(metric) %>
          <% end %>
        </th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @models.each do |model| %>
      <tr>
        <td class="border border-zinc-300 dark:border-zinc-700 p-4 text-zinc-500 dark:text-zinc-400 font-bold">
          <%= link_to model.name, model %>
        </td>
        <% model.ordered_scores(@model_type.metrics).each do |score| %>
          <td class="border border-zinc-300 dark:border-zinc-700 p-4 text-zinc-500 dark:text-zinc-400 text-center">
            <%= score.value %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
